{% extends "layout_min.html" %}

{% block content %}
      {% set id_str = item['Id'] | string() %}
      <img src="{{ qrcode("http://127.0.0.1/ding/" + id_str) }}">

      <div id="ding_id">{{ item['Id'] }}</div>

      <div id="" >{{ item['Name'] }}</div>

      <div id="" >{{ item['Description'] }}</div>

      <div id="" >{{ item['Owner'] }}</div>

      <div id="" >{{ item['Maintainer'] }}</div>

      <div id="" >{{ item['Usage'] }}</div>

      <div id="" >{{ item['Discard'] }}</div>

        {% if item['Parent'] == 0 %}
          None
        {% else %}
          <a href="{{ url_for("show_item", id=item['Parent']['Id'])}}">{{ item['Parent']['Name'] }}</a>
        {% endif %}

        <div id="images_space" class="container-fluid">
          {% if item["Images"] %}{% for _ in range((item["Images"]|length // 4) + 1) %}
          {% set base_number = loop.index0 * 4 %}
          <div class="row">
            {% for i in range(4) %}{% if base_number + i < item["Images"]|length %}{% set image = item["Images"][base_number + i] %}
                <div class="col-md-3"><img style="width: 150px; margin-bottom: 20px" src="{{ url_for("get_image", id=image) }}"></div>
            {% endif %}{% endfor %}
          </div>
          {% endfor %}{% endif %}
        </div>
      </td>


<a href="{{ url_for("edit_item", id=item['Id']) }}" role="button" class="btn btn-default"><i class="glyphicon glyphicon-pencil"></i> Edit Item</a>
<button id="delete-button" class="btn btn-warning"><i class="glyphicon glyphicon-trash"></i> Delete Item</button>

<script>
  // // bind buttons
  // bind "delete item" button
  $("#delete-button").bind("click", function(e) {
    if(e.currentTarget.textContent != "Confirm") {
      button = $("#delete-button");
      button.html("Confirm");
      button.removeClass("btn-warning");
      button.addClass("btn-danger");
    } else {
      window.location.replace("{{ url_for("delete_item", id=item["Id"]) }}");
    }
  });

</script>

{% endblock %}
